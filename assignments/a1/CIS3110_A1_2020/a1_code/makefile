CC = gcc
CFLAGS = -Wall -std=c99 

# Q1
TARGET_FORK = fork
TARGET_THR_CREATE = thr_create

# Q2
TARGET_PROC_MANAGE = proc_manage

# Q3
TARGET_THR_SHARED = thr_shared
TARGET_PROC_SHARED = proc_shared

# Q4
TARGET_IBADCNT = ibadcnt


all: $(TARGET_FORK) $(TARGET_THR_CREATE) $(TARGET_PROC_MANAGE) $(TARGET_THR_SHARED) $(TARGET_PROC_SHARED) $(TARGET_IBADCNT)

$(TARGET_FORK): $(TARGET_FORK).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_FORK) $(TARGET_FORK).c
	$(CC) $(CFLAGS) $^ -o $(TARGET_FORK)

$(TARGET_THR_CREATE): $(TARGET_THR_CREATE).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_THR_CREATE) $(TARGET_THR_CREATE).c -lpthread
	$(CC) $(CFLAGS) $^ -o $(TARGET_THR_CREATE) -lpthread


$(TARGET_PROC_MANAGE): $(TARGET_PROC_MANAGE).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_PROC_MANAGE) $(TARGET_PROC_MANAGE).c
	$(CC) $(CFLAGS) $^ -o $(TARGET_PROC_MANAGE)


$(TARGET_THR_SHARED): $(TARGET_THR_SHARED).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_THR_SHARED) $(TARGET_THR_SHARED).c -lpthread
	$(CC) $(CFLAGS) $^ -o $(TARGET_THR_SHARED) -lpthread

$(TARGET_PROC_SHARED): $(TARGET_PROC_SHARED).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_PROC_SHARED) $(TARGET_PROC_SHARED).c
	$(CC) $(CFLAGS) $^ -o $(TARGET_PROC_SHARED)


$(TARGET_IBADCNT): $(TARGET_IBADCNT).o

	# $(CC) $(CFLAGS) $^ -o $(TARGET_IBADCNT) $(TARGET_IBADCNT).c -lpthread
	$(CC) $(CFLAGS) $^ -o $(TARGET_IBADCNT) -lpthread

clean:

	$(RM) *.o $(TARGET_FORK) $(TARGET_THR_CREATE) $(TARGET_PROC_MANAGE) $(TARGET_THR_SHARED) $(TARGET_PROC_SHARED) $(TARGET_IBADCNT)